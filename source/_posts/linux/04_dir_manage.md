---
title: Linux 学习笔记_04 - Linux 文件与目录管理
date: 2018-07-08 12:06:30
tags: [Linux]
category: 'linux'
---

### 目录与路径

相对路径：使用方便，同一目录下文件相互引用不受主目录位置影响。

绝对路径：正确性好。

#### $PATH：执行文件路径的变量

为什么我们可以全局使用/bin/ls 命令，这就是环境变量 PATH 的作用。

    [user@www ~]$ echo $PATH

PATH 这个变量是由一堆目录组成，每个目录中间使用“:”隔开，每个目录是有“顺序”之分的。

不在 PATH 中的命令可以通过绝对路径来调用，或者去命令目录下调用。

添加 PATH，比如添加/root 到 PATH 下：

    [user@www ~]$ PATH="$PATH":/root

如果 PATH 中多个目录有相同命令，则哪个目录先被查询，就哪个命令被执行。

当把（.）加入到 PATH 后，命令会随目录切换变化。由于有些目录是共用的，安全起见，不建议将“.”加入 PATH。

- 不同帐号默认 PATH 不同，默认能够使用的命令也不同。

- PATH 是可以修改的，所以用户可以通过修改 PATH 执行默写命令。

- 使用路径直接指定某个命令文件来执行，比查询 PATH 准确。

- 命令应该放到正确目录下，执行才方便。

- “.”目录最好不要放到 PATH 中。

#### cd（change directory）：切换目录

    [user@www ~]$ cd [相对路径或绝对路径]
    [user@www ~]$ cd ~ // 到该帐号主文件夹
    [user@www ~]$ cd - // 回到刚才的目录
    [user@www ~]$ cd /  // 去根目录
    [user@www ~]$ cd ..  // 返回上一层目录

#### pwd（print working directory）：显示当前所在目录

    [user@www ~]$ pwd [-P]

参数：
-P：显示出当前路径而不是使用连接（link）路径。

#### mkdir（make directory）：新建新目录

    [user@www ~]$ pwd [-mp] 目录名称

参数：
-m：配置文件的权限。直接设置，不需要看默认权限。
-p：帮助直接把所需要的目录递归创建起来。

    [user@www ~]$ mkdir -p test1/test2/test3/test4 // 多层级递归创建
    [user@www ~]$ mkdir -m 711 test5 // 创建“rwx---x--x”权限的test5目录

正常目录需要一层层手动创建，-p 存在，递归同时，即使目录已经存在，也不会报错。

#### rmdir：删除“空”目录

    [user@www ~]$ rmdir [-p] 目录名称

参数：
-p：连同上层空目录一起删除。

    [user@www ~]$ rmdir -p test1/test2/test3/test4 // 从底层到test1目录，全部删除

默认一层层删除，-p 可以多层删除，但是，**每个目录下必定不能存在其他文件或目录**。

### 文件与目录管理

#### ls：查看目录或文件

    [user@www ~]$ ls [-aAdfFhilnrRSt] 目录名称
    [user@www ~]$ ls [--color={never,auto,always}] 目录名称
    [user@www ~]$ ls [--full-time] 目录名称

参数：
-a：全部文件，连同隐藏文件。
-A：全部文件，连同隐藏文件，但不包含“.”和“..”这两个目录。
-d：仅列出目录本身，而不是列出文件内的文件数据。
-f：直接列出结果，而不进行排序（ls 默认以文件名排序）。
-F：根据文件、目录等信息，给予附加数据结构，例如：

- \*：代表可执行文件； /：代表目录； =：代表 socket 文件； |：代表 FIFO 文件。

-h：将文件容量以人易读方式列出来（GB、KB 等）。
-i：列出 inode 号码。
-l：列出长数据串，包含文件属性权限等数据。
-n：列出 UID 与 GID（而不是用户和用户组名称）。
-r：将排序结果反向输出。
-R：连同子目录一起显示出来（显示目录下所有文件）。
-S：以文件容量大小排序。
-t：以时间排序。
--color=never：不要根据文件特性给予颜色展示。
--color=always：显示颜色。
--color=auto：让系统自己决定颜色。
--full-time：以完整时间模式输出。
--time={atime,ctime}：输出访问事件或改变权限属性事件（ctime）而非内容更改时间（modification time）。

#### cp：复制文件或目录

    [user@www ~]$ cp [-adfilprsu] 源文件（source） 目标文件（destination）
    [user@www ~]$ cp [options] source1 source2 source3 ... directory

参数：
-a：相当于-pdr 的意思。
-d：如果源文件为连接文件的属性，则复制连接文件的属性而非文件本身。
-f：强制。
-i：若目标文件已存在，操作前先询问。
-l：进行硬连接的连接文件创建，而非复制文件本身。
-p：连同文件的属性一起复制，而非使用默认属性。
-r：递归持续复制，用于目录复制。
-s：复制成符号连接文件，相当于“快捷方式”。
-u：若目标文件比源文件旧才更新目标文件。

注意：

- 若源文件为多个，目标文件一定是目录。
- 默认条件中，源文件与目标文件的权限不同，目标文件所有者通常是操作者，所以特殊文件复制需要携带相关参数，注意权限问题。
- 若操着者本来就权限不足，即使带-a 操作也不能完整复制文件权限。

#### rm：移除文件或目录

    [user@www ~]$ rm [-fir] 文件或目录

参数：
-f：强制删除，忽略不存在文件，不报错。
-i：互动模式，操作前询问用户是否操作。
-r：递归删除，危险操作。

删除中可以使用通配符“\*“帮助，代表 0 个或多个任意字符。

删除”-aa-“文件，可以如下方式：

    [user@www ~]$ rm ./-aa-
    [user@www ~]$ rm -- -aa-

#### mv：move，移动文件或目录或更名

    [user@www ~]$ mv [-fiu] 源文件 目标文件
    [user@www ~]$ mv [options] 源文件1 源文件2 ... 目标文件

参数：
-f：强制。
-i：若目标文件存在，询问是否覆盖。
-u：若目标文件存在并且源文件较新，才会更新。

#### 获取路径的文件名与目录名称

    [user@www ~]$ basename /etc/sysconfig/network
    network
    [user@www ~]$ dirname /etc/sysconfig/network
    /etc/sysconfig

### 文件内容查阅

#### cat：concatenate，由第一行开始显示文件内容

    [user@www ~]$ cat [-AbEnTv] 文件

参数：
-A：相当于-vET。
-b：列出行号，仅对与非空白行。
-E：将结尾处断行字符$打印出来。
-n：打印出行号，连同空白行也有行号。
-T：将[Tab]键以^I 显示出来。
-v：列出一些看不出来的字符。

Linux 断行以^I 表示，Windows 断行以^M$表示。
-T 参数可以用来识别空白是否是[Tab]。

#### tac：cat 的反向打印

#### nl：添加行号打印

    [user@www ~]$ nl [-bnw] 文件

参数：
-b：指定行号的指定方式：

- -b a：不论是否有空行，同样列出行号，类似于 cat -n。
- -b t：如果有空行，空行不列出行号（默认值）。

-n：列出行号表示方式：

- -n ln：行号在屏幕左方展示。
- -n rn：行号在自己字段右边展示，不加 0。
- -n rz：行号在自己字段右边展示，加 0。

-w：行号字段占用位数。

空白行：该行没有任何字符。

#### more：翻页查看（一页一页翻动）

    [user@www ~]$ more 文件

光标会停留最后等待命令。

命令：
空格（Space）：下翻一页。
Enter：下滚一行。
/字符串：向下查询。
:f：立刻显示出文件名及其当前行数。
q：离开 more。
b 或[Ctrl]-b：往回翻页，仅对文件有效，对管道无效。

#### less：翻页查看（一页一页翻动）

    [user@www ~]$ less 文件

光标停留最后等待命令。

命令：
空格（Space）：下翻一页。
[PageDown]：下翻一页。
[PageUp]：上翻一页。
/字符串：向下查询。
?字符串：向上查询。
n：重复前一个查询（与/和?有关）。
N：反向重复前一个查询（与/和?有关）。
q：离开。

man page 就是调用 less 命令查看。

#### head：去除前几行

#### tail：去除后几行

#### od：非纯文本文件

#### touch：修改文件时间或创建新文件

### 文件与目录的默认权限与隐藏权限

#### umask：文件默认权限

#### chattr/lsattr：文件隐藏属性

#### SUID/SGID/SBIT：文件特殊权限

#### file：查看文件类型

### 命令与文件查询

### 权限与命令的关系
